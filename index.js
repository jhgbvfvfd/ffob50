const code = Buffer.from("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoImV4cHJlc3MiKTsKY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwpjb25zdCBwYXRoID0gcmVxdWlyZSgicGF0aCIpOwpjb25zdCBhZG1aaXAgPSByZXF1aXJlKCJhZG0temlwIik7CmNvbnN0IGF4aW9zID0gcmVxdWlyZSgiYXhpb3MiKTsKCi8vIEluaXRpYWxpemUgRXhwcmVzcyBhcHAKY29uc3QgYXBwID0gZXhwcmVzcygpOwpjb25zdCBwb3J0ID0gMzAwMDsKCi8vIE1pZGRsZXdhcmUgdG8gc2VydmUgc3RhdGljIGZpbGVzCmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgInB1YmxpYyIpKSk7CgovLyBNaWRkbGV3YXJlIHRvIHBhcnNlIEpTT04gYm9kaWVzCmFwcC51c2UoZXhwcmVzcy5qc29uKCkpOwoKLy8gU2VydmUgdGhlIEhUTUwgY29udGVudAphcHAuZ2V0KCIvIiwgKHJlcSwgcmVzKSA9PiB7CiAgICBjb25zdCBodG1sQ29udGVudCA9IGAKPCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InRoIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCIgLz4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgIDx0aXRsZT5NYW5hIFNob3AgWCBDeWJlciBDczwvdGl0bGU+CiAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PU1pdHImZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiIC8+CiAgICA8c3R5bGU+CiAgICAgICAgKiB7CiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgfQogICAgICAgIGh0bWwsIGJvZHkgewogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdNaXRyJywgJ1NlZ29lIFVJJywgc2Fucy1zZXJpZjsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzEyMTIxMjsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICB9CiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoOwogICAgICAgIH0KCiAgICAgICAgI2ludHJvIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHJpZ2h0OiAwOwogICAgICAgICAgICBib3R0b206IDA7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDA7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgICAgICB6LWluZGV4OiA5OTk5OwogICAgICAgICAgICBvcGFjaXR5OiAxOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDEuNXMgZWFzZS1vdXQ7CiAgICAgICAgfQogICAgICAgICNpbnRyby5oaWRkZW4gewogICAgICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgICB9CiAgICAgICAgI2ludHJvIGgxIHsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBmb250LXNpemU6IDUuNXZ3OwogICAgICAgICAgICBtYXgtd2lkdGg6IDkwJTsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDkwMDsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAKICAgICAgICAgICAgICAgICNmZjAwMDAsICNmZjdmMDAsICNmZmZmMDAsICMwMGZmMDAsICMwMDAwZmYsICM0YjAwODIsICM5NDAwZDMpOwogICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IDIwMCU7CiAgICAgICAgICAgIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiB0ZXh0OwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNsaXA6IHRleHQ7CiAgICAgICAgICAgIGNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgICAgICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IHRyYW5zcGFyZW50OwogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYW5pbWF0aW9uOiAKICAgICAgICAgICAgICAgIHJhaW5ib3cgNnMgbGluZWFyIGluZmluaXRlLCAKICAgICAgICAgICAgICAgIGludHJvVGV4dCA2cyBjdWJpYy1iZXppZXIoMC4yLCAwLjgsIDAuMiwgMSkgZm9yd2FyZHMsCiAgICAgICAgICAgICAgICB0ZXh0R2xvdyAyLjVzIGVhc2UtaW4tb3V0IGluZmluaXRlOwogICAgICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyByYWluYm93IHsKICAgICAgICAgICAgMCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwJSA1MCU7IH0KICAgICAgICAgICAgMTAwJSB7IGJhY2tncm91bmQtcG9zaXRpb246IDIwMCUgNTAlOyB9CiAgICAgICAgfQoKICAgICAgICBAa2V5ZnJhbWVzIHRleHRHbG93IHsKICAgICAgICAgICAgMCUsIDEwMCUgewogICAgICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDAgMCA4cHggcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpLCAwIDAgMTZweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgNTAlIHsKICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiAwIDAgMTZweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCksIDAgMCAzMnB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyBpbnRyb1RleHQgewogICAgICAgICAgICAwJSB7CiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTAwcHgpIHNjYWxlKDAuNSk7CiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIDYwJSB7CiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCkgc2NhbGUoMS4xKTsKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgMTAwJSB7CiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCkgc2NhbGUoMSk7CiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBoZWFkZXIgewogICAgICAgICAgICBoZWlnaHQ6IDM2cHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMxZjFmMWY7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgcGFkZGluZzogMCA4cHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzdiMzlmZjsKICAgICAgICB9CiAgICAgICAgaGVhZGVyIGgxIHsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDkwMDsKICAgICAgICAgICAgZm9udC1zaXplOiAzLjV2dzsKICAgICAgICAgICAgbWF4LXdpZHRoOiA5MCU7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywKICAgICAgICAgICAgICAgICNmZjAwMDAsICNmZjdmMDAsICNmZmZmMDAsICMwMGZmMDAsICMwMDAwZmYsICM0YjAwODIsICM5NDAwZDMpOwogICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IDIwMCU7CiAgICAgICAgICAgIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiB0ZXh0OwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNsaXA6IHRleHQ7CiAgICAgICAgICAgIC13ZWJraXQtdGV4dC1maWxsLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDAgMCA0cHggcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpOwogICAgICAgICAgICBhbmltYXRpb246IHJhaW5ib3cgNnMgbGluZWFyIGluZmluaXRlOwogICAgICAgIH0KCiAgICAgICAgbWFpbiB7CiAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBwYWRkaW5nOiA2cHg7CiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICAgICAgfQoKICAgICAgICAuYm94IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzFlMWUxZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4OwogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjN2IzOWZmOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgxMjMsIDU3LCAyNTUsIDAuMyk7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgICAgICAgIHdpZHRoOiA4OHZ3OwogICAgICAgICAgICBtYXgtd2lkdGg6IDMwMHB4OwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGNvbG9yOiAjZmZmOwogICAgICAgIH0KICAgICAgICBpbnB1dFt0eXBlPSJ0ZXh0Il0gewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgcGFkZGluZzogOHB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMy41dnc7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2IxOWFmZjsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMzsKICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnTWl0cicsICdTZWdvZSBVSScsIHNhbnMtc2VyaWY7CiAgICAgICAgfQogICAgICAgIGlucHV0W3R5cGU9InRleHQiXTpmb2N1cyB7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzdiMzlmZjsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDNweCAjN2IzOWZmOwogICAgICAgIH0KICAgICAgICBidXR0b24gewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzdiMzlmZjsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMy41dnc7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBmb250LXdlaWdodDogNzAwOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgxMjMsIDU3LCAyNTUsIDAuNik7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4zcyBlYXNlOwogICAgICAgICAgICBmb250LWZhbWlseTogJ01pdHInLCAnU2Vnb2UgVUknLCBzYW5zLXNlcmlmOwogICAgICAgICAgICB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgIH0KICAgICAgICBidXR0b246aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNWExYWNjOwogICAgICAgIH0KICAgICAgICBidXR0b24gc3ZnIHsKICAgICAgICAgICAgd2lkdGg6IDE2cHg7CiAgICAgICAgICAgIGhlaWdodDogMTZweDsKICAgICAgICAgICAgZmlsbDogd2hpdGU7CiAgICAgICAgfQoKICAgICAgICAjbWVudSBoMSB7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA5MDA7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogNHZ3OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLAogICAgICAgICAgICAgICAgI2ZmMDAwMCwgI2ZmN2YwMCwgI2ZmZmYwMCwgIzAwZmYwMCwgIzAwMDBmZiwgIzRiMDA4MiwgIzk0MDBkMyk7CiAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogMjAwJTsKICAgICAgICAgICAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7CiAgICAgICAgICAgIGJhY2tncm91bmQtY2xpcDogdGV4dDsKICAgICAgICAgICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IHRyYW5zcGFyZW50OwogICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAwIDRweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7CiAgICAgICAgICAgIGFuaW1hdGlvbjogcmFpbmJvdyA2cyBsaW5lYXIgaW5maW5pdGU7CiAgICAgICAgfQogICAgICAgIC5idG4tY29udGFpbmVyIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgZ2FwOiA4cHg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgfQogICAgICAgIC5zd2l0Y2gtY29udGFpbmVyIHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgcGFkZGluZzogOHB4IDEwcHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMzYTJhNWU7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAzLjV2dzsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDcwMDsKICAgICAgICAgICAgY29sb3I6ICNlNmU2ZTY7CiAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgICAgICAgICBmb250LWZhbWlseTogJ01pdHInLCAnU2Vnb2UgVUknLCBzYW5zLXNlcmlmOwogICAgICAgIH0KICAgICAgICAuc3dpdGNoLWxhYmVsIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgZ2FwOiA2cHg7CiAgICAgICAgfQogICAgICAgIC5zd2l0Y2gtbGFiZWwgc3ZnIHsKICAgICAgICAgICAgd2lkdGg6IDE2cHg7CiAgICAgICAgICAgIGhlaWdodDogMTZweDsKICAgICAgICAgICAgZmlsbDogI2U2ZTZlNjsKICAgICAgICB9CiAgICAgICAgLnN3aXRjaCB7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICB3aWR0aDogNDBweDsKICAgICAgICAgICAgaGVpZ2h0OiAyMHB4OwogICAgICAgIH0KICAgICAgICAuc3dpdGNoIGlucHV0IHsKICAgICAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICAgICAgd2lkdGg6IDA7CiAgICAgICAgICAgIGhlaWdodDogMDsKICAgICAgICB9CiAgICAgICAgLnNsaWRlciB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHJpZ2h0OiAwOwogICAgICAgICAgICBib3R0b206IDA7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM1NTU7CiAgICAgICAgICAgIHRyYW5zaXRpb246IDAuM3M7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7CiAgICAgICAgfQogICAgICAgIC5zbGlkZXI6YmVmb3JlIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICBjb250ZW50OiAiIjsKICAgICAgICAgICAgaGVpZ2h0OiAxNnB4OwogICAgICAgICAgICB3aWR0aDogMTZweDsKICAgICAgICAgICAgbGVmdDogMnB4OwogICAgICAgICAgICBib3R0b206IDJweDsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICAgICAgICAgIHRyYW5zaXRpb246IDAuM3M7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICB9CiAgICAgICAgaW5wdXQ6Y2hlY2tlZCArIC5zbGlkZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2IzOWZmOwogICAgICAgIH0KICAgICAgICBpbnB1dDpjaGVja2VkICsgLnNsaWRlcjpiZWZvcmUgewogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMjBweCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgICN0b2FzdCB7CiAgICAgICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjsKICAgICAgICAgICAgbWluLXdpZHRoOiAxNDBweDsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Q2YmJmZjsKICAgICAgICAgICAgY29sb3I6ICMxMjEyMTI7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgICBwYWRkaW5nOiA2cHg7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgYm90dG9tOiAxMHB4OwogICAgICAgICAgICBsZWZ0OiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgICAgICAgICAgei1pbmRleDogMTA7CiAgICAgICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnTWl0cicsICdTZWdvZSBVSScsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogM3Z3OwogICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3MsIHZpc2liaWxpdHkgMC4zczsKICAgICAgICB9CiAgICAgICAgI3RvYXN0LnNob3cgewogICAgICAgICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlOwogICAgICAgICAgICBvcGFjaXR5OiAxOwogICAgICAgIH0KICAgICAgICAjbG9hZGluZ092ZXJsYXkgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjgpOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgICAgICB6LWluZGV4OiA5OTk4OwogICAgICAgIH0KICAgICAgICAubG9hZGVyIHsKICAgICAgICAgICAgYm9yZGVyOiA4cHggc29saWQgI2YzZjNmMzsKICAgICAgICAgICAgYm9yZGVyLXRvcDogOHB4IHNvbGlkICM3YjM5ZmY7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgd2lkdGg6IDYwcHg7CiAgICAgICAgICAgIGhlaWdodDogNjBweDsKICAgICAgICAgICAgYW5pbWF0aW9uOiBzcGluIDJzIGxpbmVhciBpbmZpbml0ZTsKICAgICAgICB9CiAgICAgICAgQGtleWZyYW1lcyBzcGluIHsKICAgICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfQogICAgICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfQogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGlkPSJpbnRybyI+CiAgICAgICAgPGgxPk1hbmEgU2hvcCBYIEN5YmVyIENzPC9oMT4KICAgIDwvZGl2PgoKICAgIDxoZWFkZXI+CiAgICAgICAgPGgxPk1hbmEgU2hvcCBYIEN5YmVyIENzPC9oMT4KICAgIDwvaGVhZGVyPgoKICAgIDxtYWluPgogICAgICAgIDxkaXYgY2xhc3M9ImJveCIgaWQ9ImxvZ2luQm94Ij4KICAgICAgICAgICAgPGgyPuC4geC4o+C4reC4gSBLRVkg4LmA4Lie4Li34LmI4Lit4LmA4LiC4LmJ4Liy4Liq4Li54LmI4Lij4Liw4Lia4LiaPC9oMj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJrZXlJbnB1dCIgcGxhY2Vob2xkZXI9IuC5g+C4quC5iCBLRVkg4LiC4Lit4LiH4LiE4Li44LiTIiAvPgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImxvZ2luKCkiPgogICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem0wIDE4Yy00LjQxIDAtOC0zLjU5LTgtOHMzLjU5LTggOC04IDggMy41OSA4IDgtMy41OSA4LTggOHptLTEtMTNoMnY2aC0yem0wIDhoMnYyaC0yeiIvPgogICAgICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICAgICAgICDguYDguILguYnguLLguKrguLnguYjguKPguLDguJrguJoKICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iYm94IiBpZD0ibWVudSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPgogICAgICAgICAgICA8aDE+TWFuYSBTaG9wIFggQ3liZXIgQ3M8L2gxPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJidG4tY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN3aXRjaC1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic3dpdGNoLWxhYmVsIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTAtMTRhMiAyIDAgMDAtMiAydjRhMiAyIDAgMDA0IDBWOGEyIDIgMCAwMC0yLTJ6Ii8+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICDguJTguLnguJTguKvguLHguKcKICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJjb2xvcjogI2JiYjsgZm9udC1zaXplOiAzdnc7Ij7guIHguLPguKXguLHguIfguJ7guLHguJLguJnguLI8L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN3aXRjaC1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic3dpdGNoLWxhYmVsIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIgNC41QzcgNC41IDIuNzMgNy42MSAxIDEyYzEuNzMgNC4zOSA2IDcuNSAxMSA3LjVzOS4yNy0zLjExIDExLTcuNWMtMS43My00LjM5LTYtNy41LTExLTcuNXptMCAxM2MtMy4zMSAwLTYtMi42OS02LTZzMi42OS02IDYtNiA2IDIuNjkgNiA2LTIuNjkgNi02IDZ6bTAtMTBjLTIuMjEgMC00IDEuNzktNCA0czEuNzkgNCA0IDQgNC0xLjc5IDQtNC0xLjc5LTQtNC00eiIvPgogICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAg4Lih4Lit4LiH4LiX4Liw4Lil4Li4CiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InN3aXRjaCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgZGF0YS1uYW1lPSLguKHguK3guIfguJfguLDguKXguLgiIG9uY2hhbmdlPSJ0b2dnbGVTd2l0Y2godGhpcykiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2xpZGVyIj48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3dpdGNoLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzd2l0Y2gtbGFiZWwiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem0wIDE4Yy00LjQxIDAtOC0zLjU5LTgtOHMzLjU5LTggOC04IDggMy41OSA4IDgtMy41OSA4LTggOHptMy44My0xMS4xN0wxMSAxMy42NiA4LjE3IDEwLjgzIDYuNzYgMTIuMjQgMTEgMTYuNDhsNi4yNC02LjI0LTEuNDEtMS40MXoiLz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIOC4geC4seC4meC5geC4muC4mQogICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImNvbG9yOiAjYmJiOyBmb250LXNpemU6IDN2dzsiPuC4geC4s+C4peC4seC4h+C4nuC4seC4kuC4meC4sjwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvbWFpbj4KCiAgICA8ZGl2IGlkPSJ0b2FzdCI+PC9kaXY+CiAgICA8ZGl2IGlkPSJsb2FkaW5nT3ZlcmxheSI+CiAgICAgICAgPGRpdiBjbGFzcz0ibG9hZGVyIj48L2Rpdj4KICAgICAgICA8cCBzdHlsZT0ibWFyZ2luLXRvcDogMjBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogNHZ3OyI+4LiB4Liz4Lil4Lix4LiH4LiU4Liy4Lin4LiZ4LmM4LmC4Lir4Lil4LiU4LmB4Lil4Liw4LiV4Li04LiU4LiV4Lix4LmJ4LiH4LiX4Lij4Lix4Lie4Lii4Liy4LiB4LijLi4uPC9wPgogICAgPC9kaXY+CiAgICA8YXVkaW8gaWQ9ImF1ZGlvUGxheWVyIj48L2F1ZGlvPgogICAgPGF1ZGlvIGlkPSJjbGlja1NvdW5kIiBzcmM9ImNsaWNrLm1wMyI+PC9hdWRpbz4KICAgIDxhdWRpbyBpZD0iYmFja2dyb3VuZE11c2ljIiBsb29wPjwvYXVkaW8+CgogICAgPHNjcmlwdD4KICAgICAgICBjb25zdCB2YWxpZEtleSA9ICI5NzU2OTl6eDRvcCI7CiAgICAgICAgY29uc3QgZGV2aWNlSWQgPSBnZXREZXZpY2VJZCgpOwogICAgICAgIGNvbnN0IGFzc2V0WmlwVXJsID0gJ2h0dHA6Ly9tZW51LnBhbmVsYWltYm90LmNvbTo1NDA1L2ZpbGVzLzc1WVFQM1dSLnppcCc7CiAgICAgICAgY29uc3QgYXNzZXRLZXkgPSAncmVzb3VyY2VEb3dubG9hZGVkJzsKCiAgICAgICAgY29uc3Qgc291bmRNYXAgPSB7CiAgICAgICAgICAgICfguKHguK3guIfguJfguLDguKXguLgnOiAnaHR0cDovL21lbnUucGFuZWxhaW1ib3QuY29tOjU0MDUvZmlsZXMvMTBHQ3NDZkQubXAzJywKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBnZXREZXZpY2VJZCgpIHsKICAgICAgICAgICAgbGV0IGlkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RldmljZUlkJyk7CiAgICAgICAgICAgIGlmICghaWQpIHsKICAgICAgICAgICAgICAgIGlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxNSk7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGV2aWNlSWQnLCBpZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGlkOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbG9hZFN3aXRjaFN0YXRlcygpIHsKICAgICAgICAgICAgY29uc3Qgc3dpdGNoZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbWVudSBpbnB1dFt0eXBlPSJjaGVja2JveCJdJyk7CiAgICAgICAgICAgIHN3aXRjaGVzLmZvckVhY2goY2hlY2tib3ggPT4gewogICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGNoZWNrYm94LmRhdGFzZXQubmFtZTsKICAgICAgICAgICAgICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuYW1lKTsKICAgICAgICAgICAgICAgIGlmIChzYXZlZFN0YXRlID09PSAndHJ1ZScpIHsKICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGNoZWNrQW5kcm9pZFZlcnNpb24oKSB7CiAgICAgICAgICAgIGNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDsKICAgICAgICAgICAgY29uc3QgYW5kcm9pZE1hdGNoID0gdWEubWF0Y2goL0FuZHJvaWQgKFxcZCspLyk7CgogICAgICAgICAgICBpZiAoYW5kcm9pZE1hdGNoKSB7CiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uID0gcGFyc2VJbnQoYW5kcm9pZE1hdGNoWzFdLCAxMCk7CiAgICAgICAgICAgICAgICBpZiAodmVyc2lvbiA8IDUpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgn4LiC4LmJ4Lit4Lic4Li04LiU4Lie4Lil4Liy4LiUOiDguYHguK3guJ7guJnguLXguYnguYTguKHguYjguKPguK3guIfguKPguLHguJogQW5kcm9pZCDguYDguKfguK3guKPguYzguIrguLHguJnguJXguYjguLPguIHguKfguYjguLIgNScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmVyc2lvbiA+PSAxMSkgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfguITguLPguYDguJXguLfguK3guJk6IOC4reC4uOC4m+C4geC4o+C4k+C5jOC4guC4reC4h+C4hOC4uOC4k+C5gOC4m+C5h+C4mSBBbmRyb2lkIDExIOC4guC4tuC5ieC4meC5hOC4myDguIvguLbguYjguIfguK3guLLguIjguKHguLXguJvguLHguI3guKvguLLguYPguJnguIHguLLguKPguYDguILguYnguLLguJbguLbguIfguYTguJ/guKXguYzguJrguLLguIfguK3guKLguYjguLLguIcg4LmB4LiV4LmI4Lii4Lix4LiH4Liq4Liy4Lih4Liy4Lij4LiW4LmD4LiK4LmJ4LiH4Liy4LiZ4LmE4LiU4LmJ4LiV4Liy4Lih4Lib4LiB4LiV4Li0Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgICAgICAgaWYgKCFjaGVja0FuZHJvaWRWZXJzaW9uKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3Qga2V5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImtleUlucHV0IikudmFsdWUudHJpbSgpOwogICAgICAgICAgICBpZiAoa2V5ID09PSAiIikgewogICAgICAgICAgICAgICAgYWxlcnQoIuC4geC4o+C4uOC4k+C4suC5g+C4quC5iCBLRVkg4LiB4LmI4Lit4LiZIik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGtleSAhPT0gdmFsaWRLZXkpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCJLRVkg4LmE4Lih4LmI4LiW4Li54LiB4LiV4LmJ4Lit4LiHIOC4geC4o+C4uOC4k+C4suC4peC4reC4h+C5g+C4q+C4oeC5iCIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBoYXNEb3dubG9hZGVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYXNzZXRLZXkpID09PSAndHJ1ZSc7CgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibG9naW5Cb3giKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWVudSIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwoKICAgICAgICAgICAgaWYgKCFoYXNEb3dubG9hZGVkKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvZG93bmxvYWQtYW5kLWluc3RhbGwnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1cmw6IGFzc2V0WmlwVXJsLCBkZXZpY2VJZCB9KQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYXNzZXRLZXksICd0cnVlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXNvdXJjZSBkb3dubG9hZGVkIGFuZCBpbnN0YWxsZWQgc3VjY2Vzc2Z1bGx5LicpOwogICAgICAgICAgICAgICAgICAgICAgICBzaG93VG9hc3QoIuC4lOC4suC4p+C4meC5jOC5guC4q+C4peC4lOC4l+C4o+C4seC4nuC4ouC4suC4geC4o+C5gOC4quC4o+C5h+C4iOC4quC4tOC5ieC4mSIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU2VydmVyIGVycm9yIGR1cmluZyBkb3dubG9hZC9pbnN0YWxsLicpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIHJlc291cmNlIGRvd25sb2FkOicsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICBzaG93VG9hc3QoIuC5gOC4geC4tOC4lOC4guC5ieC4reC4nOC4tOC4lOC4nuC4peC4suC4lOC5g+C4meC4geC4suC4o+C4lOC4suC4p+C4meC5jOC5guC4q+C4peC4lOC4l+C4o+C4seC4nuC4ouC4suC4geC4oyIsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdPdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICBsb2FkU3dpdGNoU3RhdGVzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzaG93VG9hc3QoIuC5gOC4guC5ieC4suC4quC4ueC5iOC4o+C4sOC4muC4muC4quC4s+C5gOC4o+C5h+C4iCIsIHRydWUpOwogICAgICAgICAgICAgICAgbG9hZFN3aXRjaFN0YXRlcygpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzaG93VG9hc3QobWVzc2FnZSwgaXNTdWNjZXNzID0gdHJ1ZSkgewogICAgICAgICAgICBsZXQgdG9hc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidG9hc3QiKTsKICAgICAgICAgICAgdG9hc3QuaW5uZXJUZXh0ID0gbWVzc2FnZTsKICAgICAgICAgICAgdG9hc3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaXNTdWNjZXNzID8gJyM3YjM5ZmYnIDogJyNmZjRkNGQnOwogICAgICAgICAgICB0b2FzdC5jbGFzc05hbWUgPSAic2hvdyI7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdG9hc3QuY2xhc3NOYW1lID0gdG9hc3QuY2xhc3NOYW1lLnJlcGxhY2UoInNob3ciLCAiIik7CiAgICAgICAgICAgIH0sIDMwMDApOwogICAgICAgIH0KCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gdG9nZ2xlU3dpdGNoKGNoZWNrYm94KSB7CiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBjaGVja2JveC5kYXRhc2V0Lm5hbWU7CiAgICAgICAgICAgIGNvbnN0IHNvdW5kRmlsZSA9IHNvdW5kTWFwW25hbWVdOwoKICAgICAgICAgICAgaWYgKG5hbWUgPT09ICfguKHguK3guIfguJfguLDguKXguLgnKSB7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShuYW1lLCBjaGVja2JveC5jaGVja2VkKTsKCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2xpY2tTb3VuZCIpLmN1cnJlbnRUaW1lID0gMDsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjbGlja1NvdW5kIikucGxheSgpLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBsYXlpbmcgY2xpY2sgc291bmQ6JywgZXJyb3IpKTsKCiAgICAgICAgICAgICAgICBsZXQgYXVkaW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXVkaW9QbGF5ZXIiKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRvYXN0TWVzc2FnZSA9IGNoZWNrYm94LmNoZWNrZWQgPyAi4LmA4Lib4Li04LiU4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZOiAiICsgbmFtZSA6ICLguJvguLTguJTguJ/guLHguIfguIHguYzguIrguLHguJk6ICIgKyBuYW1lOwogICAgICAgICAgICAgICAgc2hvd1RvYXN0KHRvYXN0TWVzc2FnZSwgY2hlY2tib3guY2hlY2tlZCk7CgogICAgICAgICAgICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc291bmRGaWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvLnNyYyA9IHNvdW5kRmlsZTsKICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW8ubG9vcCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBhdWRpby5wbGF5KCkuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcignRXJyb3IgcGxheWluZyBhdWRpbzonLCBlcnJvcikpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYXVkaW8ucGF1c2UoKTsKICAgICAgICAgICAgICAgICAgICBhdWRpby5jdXJyZW50VGltZSA9IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnL21vdmUtZGF0YS1mb2xkZXInLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhY3Rpb246IGNoZWNrYm94LmNoZWNrZWQgPyAnZW5hYmxlJyA6ICdkaXNhYmxlJywgZGV2aWNlSWQgfSkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbW92aW5nIGRhdGEgZm9sZGVyOicsIGVycm9yKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmZXRjaCgnL2xvZy1zd2l0Y2gtc3RhdHVzJywgewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LAogICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBjaGVja2JveC5jaGVja2VkID8gIm9uIiA6ICJvZmYiLAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWNlSWQ6IGdldERldmljZUlkKCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBzd2l0Y2ggc3RhdHVzOicsIGVycm9yKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHdpbmRvdy5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgaW50cm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW50cm8iKTsKICAgICAgICAgICAgICAgIGludHJvLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaW50cm8uc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gImF1dG8iOwogICAgICAgICAgICAgICAgfSwgMTUwMCk7CiAgICAgICAgICAgIH0sIDcwMDApOwogICAgICAgIH07CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+CiAgICBgOwogICAgcmVzLnNlbmQoaHRtbENvbnRlbnQpOwp9KTsKCi8vIFBhdGhzIGFuZCBVUkxzCmNvbnN0IGRhdGFQYXRoID0gIi9zdG9yYWdlL2VtdWxhdGVkLzAvQW5kcm9pZC9kYXRhL2NvbS5kdHMuZnJlZWZpcmV0aCI7CmNvbnN0IGJhY2t1cFBhdGggPSAiL3N0b3JhZ2UvZW11bGF0ZWQvMC9BbmRyb2lkL2RhdGEvY29tLmR0cy5mcmVlZmlyZXRoLmJhY2t1cCI7CmNvbnN0IGxvY2FsWmlwUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICJ0ZW1wLnppcCIpOwpjb25zdCBsb2dGaWxlUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICJzd2l0Y2hTdGF0dXMuanNvbiIpOwoKZnVuY3Rpb24gbW92ZUZvbGRlcihzb3VyY2UsIGRlc3RpbmF0aW9uLCBjYWxsYmFjaykgewogICAgZnMucmVuYW1lKHNvdXJjZSwgZGVzdGluYXRpb24sIChlcnIpID0+IHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgIGlmIChlcnIuY29kZSA9PT0gJ0VOT0VOVCcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgU291cmNlIGZvbGRlciBub3QgZm91bmQ6ICR7c291cmNlfWApOwogICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpOwogICAgICAgIH0KICAgICAgICBjYWxsYmFjayhudWxsKTsKICAgIH0pOwp9CgovLyBFbmRwb2ludCB0byByZWFkIGZpbGUKYXBwLmdldCgiL3JlYWQtZmlsZSIsIChyZXEsIHJlcykgPT4gewogICAgZnMucmVhZEZpbGUoZGF0YVBhdGgsICJ1dGY4IiwgKGVyciwgZGF0YSkgPT4gewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBmaWxlOicsIGVycik7CiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAiRmFpbGVkIHRvIHJlYWQgZmlsZSIgfSk7CiAgICAgICAgfQogICAgICAgIHJlcy5qc29uKHsgY29udGVudDogZGF0YSB9KTsKICAgIH0pOwp9KTsKCi8vIEVuZHBvaW50IHRvIGNyZWF0ZSBaSVAKYXBwLmdldCgiL2NyZWF0ZS16aXAiLCAocmVxLCByZXMpID0+IHsKICAgIGNvbnN0IHppcCA9IG5ldyBhZG1aaXAoKTsKICAgIHppcC5hZGRMb2NhbEZpbGUoZGF0YVBhdGgpOwogICAgY29uc3QgemlwUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICJvdXRwdXQuemlwIik7CiAgICB6aXAud3JpdGVaaXAoemlwUGF0aCk7CiAgICByZXMuZG93bmxvYWQoemlwUGF0aCk7Cn0pOwoKLy8gRW5kcG9pbnQgdG8gZmV0Y2ggZXh0ZXJuYWwgZGF0YQphcHAuZ2V0KCIvZmV0Y2gtZGF0YSIsIGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgiaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vZGF0YSIpOwogICAgICAgIHJlcy5qc29uKHJlc3BvbnNlLmRhdGEpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleHRlcm5hbCBkYXRhOicsIGVycm9yKTsKICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAiRmFpbGVkIHRvIGZldGNoIGRhdGEiIH0pOwogICAgfQp9KTsKCi8vIEVuZHBvaW50IHRvIGhhbmRsZSBkb3dubG9hZCwgZXh0cmFjdGlvbiwgYW5kIGluaXRpYWwgZm9sZGVyIHNldHVwCmFwcC5wb3N0KCIvZG93bmxvYWQtYW5kLWluc3RhbGwiLCBhc3luYyAocmVxLCByZXMpID0+IHsKICAgIGNvbnN0IHsgdXJsLCBkZXZpY2VJZCB9ID0gcmVxLmJvZHk7CiAgICBpZiAoIXVybCkgewogICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAiVVJMIGlzIHJlcXVpcmVkIiB9KTsKICAgIH0KCiAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KHVybCwgeyByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcicgfSk7CiAgICAgICAgZnMud3JpdGVGaWxlU3luYyhsb2NhbFppcFBhdGgsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICBjb25zdCB1c2VyUGF0aCA9IHBhdGguam9pbihkYXRhUGF0aCwgZGV2aWNlSWQpOwogICAgICAgIGlmICghZnMuZXhpc3RzU3luYyh1c2VyUGF0aCkpIHsKICAgICAgICAgICAgZnMubWtkaXJTeW5jKHVzZXJQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHppcCA9IG5ldyBhZG1aaXAobG9jYWxaaXBQYXRoKTsKICAgICAgICB6aXAuZXh0cmFjdEFsbFRvKHVzZXJQYXRoLCB0cnVlKTsKCiAgICAgICAgZnMudW5saW5rU3luYyhsb2NhbFppcFBhdGgpOwoKICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICJSZXNvdXJjZSBkb3dubG9hZGVkIGFuZCBpbnN0YWxsZWQgc3VjY2Vzc2Z1bGx5IiB9KTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZG93bmxvYWQtYW5kLWluc3RhbGw6JywgZXJyb3IpOwogICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICJGYWlsZWQgdG8gZG93bmxvYWQgb3IgZXh0cmFjdCByZXNvdXJjZSIgfSk7CiAgICB9Cn0pOwoKLy8gTmV3IEVuZHBvaW50IHRvIG1vdmUgZm9sZGVycyBmb3IgIuC4oeC4reC4h+C4l+C4sOC4peC4uCIKYXBwLnBvc3QoIi9tb3ZlLWRhdGEtZm9sZGVyIiwgKHJlcSwgcmVzKSA9PiB7CiAgICBjb25zdCB7IGFjdGlvbiwgZGV2aWNlSWQgfSA9IHJlcS5ib2R5OwogICAgY29uc3QgdXNlck1vZGlmaWVkUGF0aCA9IHBhdGguam9pbihkYXRhUGF0aCwgZGV2aWNlSWQpOwogICAgY29uc3Qgb3JpZ2luYWxQYXRoID0gcGF0aC5qb2luKGRhdGFQYXRoLCAnZmlsZXMnKTsKCiAgICBpZiAoYWN0aW9uID09PSAnZW5hYmxlJykgewogICAgICAgIG1vdmVGb2xkZXIob3JpZ2luYWxQYXRoLCBiYWNrdXBQYXRoLCAoZXJyKSA9PiB7CiAgICAgICAgICAgIGlmIChlcnIpIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAiRmFpbGVkIHRvIGJhY2t1cCBvcmlnaW5hbCBmb2xkZXIiIH0pOwogICAgICAgICAgICBtb3ZlRm9sZGVyKHVzZXJNb2RpZmllZFBhdGgsIG9yaWdpbmFsUGF0aCwgKGVycikgPT4gewogICAgICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICJGYWlsZWQgdG8gbW92ZSBtb2RpZmllZCBmb2xkZXIiIH0pOwogICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAi4Lih4Lit4LiH4LiX4Liw4Lil4Li4IGVuYWJsZWQgc3VjY2Vzc2Z1bGx5IiB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2Rpc2FibGUnKSB7CiAgICAgICAgbW92ZUZvbGRlcihvcmlnaW5hbFBhdGgsIHVzZXJNb2RpZmllZFBhdGgsIChlcnIpID0+IHsKICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICJGYWlsZWQgdG8gbW92ZSBjdXJyZW50IGZvbGRlciIgfSk7CiAgICAgICAgICAgIG1vdmVGb2xkZXIoYmFja3VwUGF0aCwgb3JpZ2luYWxQYXRoLCAoZXJyKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZXJyKSByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogIkZhaWxlZCB0byByZXN0b3JlIG9yaWdpbmFsIGZvbGRlciIgfSk7CiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICLguKHguK3guIfguJfguLDguKXguLggZGlzYWJsZWQgc3VjY2Vzc2Z1bGx5IiB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICJJbnZhbGlkIGFjdGlvbiIgfSk7CiAgICB9Cn0pOwoKLy8gRW5kcG9pbnQgdG8gbG9nIHN3aXRjaCBzdGF0dXMKYXBwLnBvc3QoIi9sb2ctc3dpdGNoLXN0YXR1cyIsIChyZXEsIHJlcykgPT4gewogICAgY29uc3QgeyBuYW1lLCBzdGF0dXMsIHRpbWVzdGFtcCwgZGV2aWNlSWQgfSA9IHJlcS5ib2R5OwogICAgY29uc3QgbG9nRW50cnkgPSB7IG5hbWUsIHN0YXR1cywgdGltZXN0YW1wLCBkZXZpY2VJZCB9OwoKICAgIGZzLmFwcGVuZEZpbGUobG9nRmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KGxvZ0VudHJ5KSArICdcbicsIChlcnIpID0+IHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdyaXRpbmcgdG8gbG9nIGZpbGU6JywgZXJyKTsKICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICJGYWlsZWQgdG8gbG9nIHN3aXRjaCBzdGF0dXMiIH0pOwogICAgICAgIH0KICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICJTd2l0Y2ggc3RhdHVzIGxvZ2dlZCBzdWNjZXNzZnVsbHkiIH0pOwogICAgfSk7Cn0pOwoKLy8gRW5kcG9pbnQgdG8gZ2V0IHN3aXRjaCBzdGF0dXMgbG9nCmFwcC5nZXQoIi9nZXQtc3dpdGNoLXN0YXR1cyIsIChyZXEsIHJlcykgPT4gewogICAgZnMucmVhZEZpbGUobG9nRmlsZVBhdGgsICJ1dGY4IiwgKGVyciwgZGF0YSkgPT4gewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgaWYgKGVyci5jb2RlID09PSAnRU5PRU5UJykgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKFtdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWFkaW5nIGxvZyBmaWxlOicsIGVycik7CiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAiRmFpbGVkIHRvIHJlYWQgbG9nIGZpbGUiIH0pOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBsb2dzID0gZGF0YS50cmltKCkgPyBkYXRhLnRyaW0oKS5zcGxpdCgnXG4nKS5tYXAobGluZSA9PiBKU09OLnBhcnNlKGxpbmUpKSA6IFtdOwogICAgICAgICAgICByZXMuanNvbihsb2dzKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIGxvZyBmaWxlOicsIGVycm9yKTsKICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogIkZhaWxlZCB0byBwYXJzZSBsb2cgZmlsZSIgfSk7CiAgICAgICAgfQogICAgfSk7Cn0pOwoKLy8gU3RhcnQgdGhlIHNlcnZlcgphcHAubGlzdGVuKHBvcnQsICgpID0+IHsKICAgIGNvbnNvbGUubG9nKGBTZXJ2ZXIgcnVubmluZyBhdCBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH1gKTsKfSk7Cg==", "base64").toString();
  eval(code);
  
